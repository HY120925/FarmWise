<!DOCTYPE html>
<html>
<head>
  <title>ðŸŒ± Smart Agricultural Advisor</title>
</head>
<body>
  <h1>ðŸŒ± Smart Agricultural Advisor</h1>

  <!-- Crop Recommendation Form -->
  <h2>Crop Recommendation</h2>
  <form id="recommendForm">
    <label>Soil Type:</label>
    <input type="text" id="soil_type" value="Loam"><br><br>
    <label>Location:</label>
    <input type="text" id="location" value="Bengaluru,IN"><br><br>
    <button type="submit">Get Recommendation</button>
  </form>

  <h3>Recommendation Result:</h3>
  <pre id="recommendResult"></pre>
  <hr>

  <!-- Yield & Price Prediction Form -->
  <h2>Yield & Price Prediction</h2>
  <form id="predictForm">
    <label>Location:</label>
    <input type="text" id="pred_location" value="Haryana"><br><br>
    <label>Year:</label>
    <input type="number" id="pred_year" value="2022"><br><br>
    <label>Crop:</label>
    <input type="text" id="pred_crop" value="Wheat"><br><br>
    <label>Soil Type:</label>
    <input type="text" id="pred_soil" value="Loam"><br><br>
    <button type="submit">Predict Yield & Price</button>
  </form>

  <h3>Prediction Result:</h3>
  <pre id="predictResult"></pre>

  <script>
    // Crop Recommendation Request
    document.getElementById("recommendForm").addEventListener("submit", async function(e) {
      e.preventDefault();
      const soil = document.getElementById("soil_type").value;
      const loc = document.getElementById("location").value;

      const response = await fetch("http://127.0.0.1:5000/recommend", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({soil_type: soil, location: loc})
      });
      const data = await response.json();
      document.getElementById("recommendResult").textContent = JSON.stringify(data, null, 2);
    });

    // Yield & Price Prediction Request
    document.getElementById("predictForm").addEventListener("submit", async function(e) {
      e.preventDefault();
      const loc = document.getElementById("pred_location").value;
      const year = document.getElementById("pred_year").value;
      const crop = document.getElementById("pred_crop").value;
      const soil = document.getElementById("pred_soil").value;

      const response = await fetch("http://127.0.0.1:5000/predict", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({location: loc, year: parseInt(year), crop: crop, soil_type: soil})
      });
      const data = await response.json();
      document.getElementById("predictResult").textContent = JSON.stringify(data, null, 2);
    });
  </script>
</body>
</html>
